<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leaderboard - Lahan Basah Hijau</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <style>
     html { scroll-behavior: smooth; }
    body {
      font-family: 'Fredoka', sans-serif;
      background-color: #f0faff;
      overflow-x: hidden;
    }
.navbar-nav .nav-link {
      padding: 8px 16px;
      transition: all 0.3s ease;
      border-radius: 20px;
    }
    .navbar-nav .nav-link:hover {
      background-color: #f0f8ff;
      color: #0d6efd;
    }
    .navbar-nav .nav-link.active {
      background-color: #d1e7ff;
      color: #0d6efd;
    }

    .hero {
  background: linear-gradient(to bottom, #b3e9ff, #d1fce5);
  padding: 100px 20px 60px;
  text-align: center;
  position: relative;
  overflow: hidden;
  border-radius: 0 0 60px 60px;
  border: 4px solid rgba(255, 255, 255, 0.6);
}

.hero-title {
  color: #035397;
  font-size: 3.2rem;
  font-weight: 700;
  text-shadow: 2px 2px #ffffff;
  position: relative;
}

.hero-subtitle {
  color: #0b6c5f;
  font-size: 1.25rem;
  margin-bottom: 20px;
  position: relative;
}

.main-button {
      background-color: #2e8b57;
      color: white;
      font-size: 1.2rem;
      padding: 12px 32px;
      border-radius: 40px;
      margin-top: 20px;
      transition: all 0.3s ease;
      margin-right: 20px;
    }
    .main-button:hover {
      background-color: #256b45;
    }
    .main-button2 {
      border: 1px solid #2e8b57;
      color: black;
      font-size: 1.2rem;
      padding: 12px 32px;
      border-radius: 40px;
      margin-top: 20px;
      transition: all 0.3s ease;
      margin-right: 20px;
    }
    .main-button2:hover {
      background-color: #256b45;
      color: white;
    }

 .bird { 
      position: absolute;
      top: 80px;
      left: -100px;
      width: 5%;
      animation: flyBird 10s linear infinite;
      animation-delay: 0s;
      z-index: 1;
    }

    .bird1 {
      position: absolute;
      top: 100px;
      left: -150px;
      width: 5%;
      animation: flyBird 15s linear infinite;
      animation-delay: 5s;
      z-index: 1;
    }

    .bird2 {
      position: absolute;
      top: 50px;
      left: -200px;
      width: 8%;
      animation: flyBird 20s linear infinite;
      animation-delay: 10s;
      z-index: 1;
    }

    .bird3 {
      position: absolute;
      top: 50px;
      left: -200px;
      width: 8%;
      animation: flyBird 25s linear infinite;
      animation-delay: 15s;
      z-index: 1;
    }

    .bird4 {
      position: absolute;
      top: 50px;
      left: -150px;
      width: 8%;
      animation: flyBird 20s linear infinite;
      animation-delay: 5s;
      z-index: 1;
    }

    .bird5 {
      position: absolute;
      top: 50px;
      left: -200px;
      width: 8%;
      animation: flyBird 15s linear infinite;
      animation-delay: 12s;
      z-index: 1;
    }
    
    @keyframes flyBird {
      0% { transform: translateX(0) rotate(0deg); }
      100% { transform: translateX(120vw) rotate(10deg); }
    }

    .cloud {
      position: absolute;
      top: -70px;
      left: 10%;
      width: 30%;
      animation: floatCloud 40s linear infinite;
    }
    .cloud2 {
      top: 60px;
      position: absolute;
      left: 60%;
      width: 30%;
      animation: floatCloud 40s linear infinite;
      animation-delay: 50s linear infinite;
    }

    @keyframes floatCloud {
      0% { transform: translateX(0); }
      100% { transform: translateX(100vw); }
    }

    .hero img.peneliti {
      position: absolute;
      left: 200px;
      bottom: 40px;
      max-height: 200px;
      width: auto;
      animation: swayPeneliti 4s ease-in-out infinite;
      z-index: 2;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes swayPeneliti {
      0% { transform: rotate(0deg) translateY(0); }
      25% { transform: rotate(-2deg) translateY(2px); }
      50% { transform: rotate(0deg) translateY(0); }
      75% { transform: rotate(2deg) translateY(-2px); }
      100% { transform: rotate(0deg) translateY(0); }
    }

    @media (max-width: 768px) {
      .hero { 
        padding: 80px 20px 40px;}
      .hero-title { font-size: 2.2rem; }
      .hero-subtitle { font-size: 1rem; }
      .main-button { font-size: 1rem; padding: 10px 24px; }
      .main-button2 { font-size: 1rem; padding: 10px 24px; }
      .hero img.peneliti {display: none;}

  .cloud,
  .cloud2,
  .cloud3,
  .bird,
  .bird1 {
    margin-top: 80px;
  }
    }

.leaderboard-section {
  padding: 60px 0;
  position: relative;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #035397;
  text-shadow: 1px 1px #ffffff;
}

.section-subtitle {
  font-size: 1.2rem;
  color: #0b6c5f;
}

.score-card {
  background: #ffffff;
  border: 3px dashed #4fc3f7;
  border-radius: 30px;
  padding: 30px 20px;
  text-align: center;
  box-shadow: 4px 4px 12px rgba(0,0,0,0.05);
  transition: transform 0.3s ease;
}
.score-card:hover {
  transform: scale(1.05);
}

.score-rank {
  font-size: 2rem;
  font-weight: bold;
  color: #ff9800;
}

.score-name {
  font-size: 1.5rem;
  font-weight: 600;
  color: #035397;
  margin-top: 10px;
}

.score-points {
  font-size: 1.25rem;
  color: #0b6c5f;
  margin-top: 5px;
}

  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top" style="z-index: 1030;">
    <div class="container">
      <a class="navbar-brand fw-bold text-primary" href="/modul/modul.html">
        <img src="/modul/foto/logo.png" alt="Logo" width="60" class="me-2" />
        Lahan Basah Hijau
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav fw-semibold">
          <li class="nav-item"><a class="nav-link" href="/modul/modul.html">üè† Beranda</a></li>
          <li class="nav-item"><a class="nav-link " href="/kuis/kuis.html">üß† Kuis</a></li>
          <li class="nav-item"><a class="nav-link" href="/simulasi/simulasi.html">üß™ Simulasi</a></li>
          <li class="nav-item"><a class="nav-link" href="/proyek/proyek.html">üí° Proyek</a></li>
          <li class="nav-item"><a class="nav-link active" href="/leaderboard/leaderboard.html">üèÜ Papan Peringkat</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <section class="hero">
  <!-- Dekorasi Daun & Awan -->
  <img src="/modul/foto/daun1.png" class="bird" />
  <img src="/modul/foto/daun2.png" class="bird1" />
  <img src="/modul/foto/leaderboard.png" class="bird2" />
  <img src="/modul/foto/leaderboard.png" class="bird4" />
  <img src="/modul/foto/leaderboard.png" class="bird5" />
  <img src="/modul/foto/cloud1.png" class="cloud" />
  <img src="/modul/foto/cloud2.png" class="cloud2" />

  <div class="container position-relative z-1">
    <h1 class="hero-title">Papan Peringkat</h1>
    <p class="hero-subtitle">Yuk lihat siapa saja yang jadi juara dalam belajar tentang lahan basah!</p>
    <a href="#leaderboard" class="btn main-button">Lihat Skor</a>
    <a href="/kuis/kuis.html" class="btn main-button2">Coba Kuis</a><br>
  </div>
</section>


  <!-- Leaderboard Section -->
  <section id="leaderboard" class="leaderboard-section py-5">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
          <h2 class="section-title mb-4">üèÖ Daftar Skor Tertinggi</h2>
        </div>
      </div>

      <div class="row justify-content-center" id="leaderboard-list">
        <!-- Leaderboard akan dimuat di sini -->
      </div>
    </div>
  </section>

 <!--Musik-->
<audio id="bg-music" autoplay loop>
  <source src="/modul/sound/sound2.mp3" type="audio/mpeg">
</audio>

<!-- Tombol Musik -->
<button id="music-toggle"
        class="btn btn-light rounded-circle shadow position-fixed position-absolute d-flex align-items-center justify-content-center"
        style="bottom: 20px; right: 20px; width: 50px; height: 50px; z-index: 9999;"
        title="Nyalakan/Matikan Musik">
  <span id="music-icon">üîä</span>
</button>

<!-- Toast -->
<div id="music-toast"
     class="position-fixed bottom-0 end-0 mb-5 me-3 p-3 bg-white rounded shadow text-dark fw-semibold"
     style="z-index: 9999; display: none; transition: opacity 0.5s ease;">
  Musik Dimatikan
</div>

  <footer class="bg-light text-center text-lg-start shadow-top bg-white">
  <div class="container py-4">

    <div class="row align-items-center">
      <div class="col-md-6 text-md-start text-center mb-3 mb-md-0">
        <h5 class="fw-bold text-primary">
          <img src="/modul/foto/logo.png" alt="Logo" width="60" class="me-2">
          Lahan Basah Hijau
        </h5>
        <p class="text-muted small mb-0">
          Aplikasi pembelajaran interaktif berbasis STEM untuk mengenal, menjaga, dan mencintai lahan basah.
        </p>
      </div>
      <div class="col-md-6 text-md-end text-center">
        <ul class="list-inline mb-0">
          <li class="list-inline-item mx-2"><a href="/modul/modul.html" class="text-decoration-none text-muted">Beranda</a></li>
          <li class="list-inline-item mx-2"><a href="/kuis/kuis.html" class="text-decoration-none text-muted">Kuis</a></li>
          <li class="list-inline-item mx-2"><a href="/simulasi/simulasi.html" class="text-decoration-none text-muted">Simulasi</a></li>
          <li class="list-inline-item mx-2"><a href="/proyek/proyek.html" class="text-decoration-none text-muted">Proyek</a></li>
          <li class="list-inline-item mx-2"><a href="/leaderboard/leaderboard.html" class="text-decoration-none text-muted">Papan Peringkat</a></li>
        </ul>
      </div>
    </div>

  </div>
  <div class="text-center bg-white py-3 border-top">
    <small class="text-muted">¬© 2025 Lahan Basah Hijau. Semua hak dilindungi.</small>
  </div>
</footer>
 <!-- Firebase & Script -->
 <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js" integrity="..." crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="..." crossorigin="anonymous"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  
  // üî• Firebase Configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDguvGwMNqADw8vC2877IDvoxmnTvj1txU",
    authDomain: "inovasi-stem-lahan-basah.firebaseapp.com",
    databaseURL: "https://inovasi-stem-lahan-basah-default-rtdb.firebaseio.com",
    projectId: "inovasi-stem-lahan-basah",
    storageBucket: "inovasi-stem-lahan-basah.appspot.com",
    messagingSenderId: "853863316290",
    appId: "1:853863316290:web:721e94519c84e725f1a6db"
  };

  // Inisialisasi Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function renderLeaderboard() {
    const leaderboardContainer = document.getElementById("leaderboard-list");

    db.ref("kuis").once("value", snapshot => {
      const rawData = snapshot.val();

      if (!rawData) {
        leaderboardContainer.innerHTML = `<p class="text-center text-muted">Belum ada data skor saat ini.</p>`;
        return;
      }

      const data = [];

      for (let key in rawData) {
        const user = rawData[key];
        if (user.nama && user.skor !== undefined) {
          data.push({
            name: user.nama,
            score: user.skor,
            school: user.sekolah || ""
          });
        }
      }

      // Urutkan dari skor tertinggi
      data.sort((a, b) => b.score - a.score);

      const top10 = data.slice(0, 10);
      leaderboardContainer.innerHTML = "";

      top10.forEach((user, index) => {
        const rank = index + 1;
        const html = `
          <div class="col-md-4 mb-4">
            <div class="score-card">
              <div class="score-rank">#${rank}</div>
              <div class="score-name">${user.name}</div>
              <div class="score-points">Skor: ${user.score}</div>
              ${user.school ? `<div class="score-school">${user.school}</div>` : ""}
            </div>
          </div>
        `;
        leaderboardContainer.innerHTML += html;
      });
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    AOS.init();
    renderLeaderboard();
  });

   const music = document.getElementById('bg-music');
  const toggleBtn = document.getElementById('music-toggle');
  const icon = document.getElementById('music-icon');
  const toast = document.getElementById('music-toast');

  function updateIcon() {
    icon.textContent = music.paused ? 'üîá' : 'üîä';
  }

  function showToast(message) {
    toast.textContent = message;
    toast.style.display = 'block';
    toast.style.opacity = '1';
    setTimeout(() => {
      toast.style.opacity = '0';
      setTimeout(() => (toast.style.display = 'none'), 500);
    }, 2000);
  }

  toggleBtn.addEventListener('click', () => {
    if (music.paused) {
      music.play().then(() => {
        updateIcon();
        showToast('Musik Dinyalakan');
      }).catch(() => {});
    } else {
      music.pause();
      updateIcon();
      showToast('Musik Dimatikan');
    }
  });

  // Autoplay fix: play after first interaction if needed
  document.addEventListener('DOMContentLoaded', () => {
    const tryPlay = () => {
      if (music.paused) {
        music.play().then(updateIcon).catch(() => {});
      } else {
        updateIcon();
      }
      document.body.removeEventListener('click', tryPlay);
    };
    document.body.addEventListener('click', tryPlay);
  });
  AOS.init();
</script>

</body>
</html>
